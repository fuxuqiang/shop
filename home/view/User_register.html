<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>商城 - 注册</title>
<link href="<?= U('home') ?>/view/css/user.css" rel="stylesheet" />
<script src="<?= ROOT ?>/public/js/jquery-2.2.1.min.js"></script>
<script src="<?= ROOT ?>/public/js/ajax.js"></script>
</head>
<body>
<div class="box">
	<h1>商城 - 欢迎注册</h1>
	<div class="main">
		<div class="register-ad left"><!--广告位--></div>
		<form method="post" id="regForm">
			<table class="register right">
				<tr><th>用户名：</th><td><input type="text" name="name" required /></td></tr>
				<tr><th>密码：</th><td><input type="password" name="pwd" id="pwd" required /></td></tr>
				<tr><th>确认密码：</th><td><input type="password" id="pwd2" required /></td></tr>
				<tr><th>验证码：</th><td><input type="text" name="captcha" required /></td></tr>
				<tr>
					<td> </td>
					<td>
						<img src="<?= $captcha ?>" onclick="this.src='<?= $captcha ?>?t='+new Date;" id="captcha" title="点击刷新验证码" />
					</td>
				</tr>
				<tr><td> </td><td><input class="button" type="submit" value="注　册" id="regBtn" /></td></tr>
				<tr><td colspan="2" class="center"><a href="<?= U('home/User/login') ?>">返回登录</a><a href="<?= ROOT ?>">返回首页</a></td></tr>
			</table>
		</form>
	</div>
</div>
<script>
//失去焦点时验证表单
$("#pwd2").blur(function(){
	if($(this).val() !== $("#pwd").val()){
		$(this).addClass('error');
	}else{
		$(this).removeClass('error');
	}
});
//Ajax表单提交
$("#regForm").ajaxForm(function(){
	setTimeout(function() {
		location.href = '<?= ROOT ?>';
	}, 1500);
});
//表单提交时验证表单
$("#regBtn").click(function(){
	if($("#pwd2").val() !== $("#pwd").val()){
		showTip("两次输入密码不一致！");
		return false;
	}
});
</script>
</body>
</html>